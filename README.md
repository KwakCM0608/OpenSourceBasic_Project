# 🎲 Open-Source Halli Galli with Raspberry Pi & LED Matrix
오픈소스를 활용한 Raspi, Arduino 기반 할리갈리 게임기 (2020)
![Image](https://cdn11.bigcommerce.com/s-ua4dd/images/stencil/1280x1280/products/246971/328359/AGI24150__76091.1728604112.png?c=2)
## 📌 프로젝트 개요

본 프로젝트는 대중적인 보드게임 **할리갈리(Halli Galli)**를 기반으로,
**라즈베리파이(Raspberry Pi)**와 **아두이노(Arduino)**, **압력 센서**, **LED Matrix**를 활용하여
기존 게임의 공정성 문제를 개선한 **디지털 보드게임 시스템**을 구현한 오픈소스 프로젝트이다 

기존 할리갈리 게임은

* 카드 공개 타이밍이 플레이어마다 다르고
* 하나의 종을 여러 명이 동시에 치는 상황에서
  승패 판정이 모호해지는 문제가 존재한다.

본 프로젝트에서는 **컴퓨터가 카드 공개를 제어**하고,
**플레이어별 종 입력을 독립적으로 처리**함으로써
보다 정확하고 공정한 게임 진행이 가능하도록 설계하였다.

---

## 🎮 게임 규칙

* 카드는 **4가지 색상**, 각 카드에는 **1~5개의 동그라미**가 존재
* 테이블에 공개된 카드 중
  **같은 색상의 동그라미 합이 5개가 되면 종을 눌러야 함**
* ✔ 올바르게 종을 누른 경우
  → 공개된 모든 카드 획득
* ✘ 잘못 누른 경우
  → 자신의 카드를 다른 플레이어에게 분배

### 카드 구성

* 총 **56장**

  * 4인 모드: 각 플레이어 **14장**
  * 싱글 모드: 플레이어 28장 / 컴퓨터 28장
* 카드는 **1초 간격으로 컴퓨터가 자동 공개**

---

## 🛠 시스템 구성

### 하드웨어

* Raspberry Pi
* Arduino
* 압력 센서 × 4 (플레이어별 종)
* LED Matrix

### 소프트웨어

* Python
* Pygame
* Serial Communication
* Python `time` 모듈

---

## 🧩 게임 동작 구조

### 카드 공개 방식

* 기존 오픈소스 할리갈리 게임은 키보드 입력으로 카드 공개
* 본 프로젝트에서는 **컴퓨터가 자동으로 1초마다 카드 공개**
* 모든 플레이어가 **동일한 타이밍에 카드 상태 확인 가능**

---

### 종(압력 센서) 입력 처리

* 각 플레이어는 **자신의 압력 센서(종)**를 가짐
* Arduino에서 센서 값을 측정 후
  Raspberry Pi로 **Serial 통신 전송**
* 센서 값이 특정 임계값을 초과하면
  “종을 눌렀다”고 판단 

---

## ⏱ 반응 시간 측정

* 카드가 공개되는 순간 `time1 = time.time()`
* 압력 센서 입력 감지 시 `time2 = time.time()`
* **반응 시간 = time2 - time1**
* 반응 시간 비교를 통해 정확한 승패 판정 수행

---

## 🧍‍♂️ 게임 모드

### 🔹 4인 플레이 모드

* 각 플레이어가 독립적인 압력 센서를 사용
* 가장 빠르고 정확하게 종을 누른 플레이어가 승리

### 🔹 싱글 모드 (1P vs Computer)

* 사용자와 컴퓨터 간 반응 속도 대결
* 컴퓨터는 **EASY / NORMAL / HARD** 난이도를 가짐
* 난이도에 따라 종을 누르는 반응 시간이 다르게 설정됨
* 내부 로직은 4인 모드와 동일하되,
  일부 플레이어를 비활성화하여 1:1 대결 구조로 동작

---

## 🏆 TOP 10 랭킹 시스템

* 각 게임에서 측정된 **최단 반응 시간 기록**
* `rank.txt` 파일에 반응 시간 데이터 저장
* 게임 종료 시:

  * 현재 게임 기록과 기존 기록을 비교
  * **TOP 10 랭킹 갱신**
* LED Matrix에 **엔딩 크레딧 형태로 랭킹 출력** 

---

## ⚠ 구현 한계

* 게임 시작 전 사용자 ID 직접 입력 기능 미구현
* LED 밝기 조절 기능 미적용
* 서버 기반 사용자 및 랭킹 관리 기능 미구현

---

## 🚀 향후 개선 방향

* 사용자 계정 기반 랭킹 서버 구축
* LED Matrix 출력 효과 및 밝기 조절 기능 추가
* 모바일·웹 연동 확장 가능성 검토

---
